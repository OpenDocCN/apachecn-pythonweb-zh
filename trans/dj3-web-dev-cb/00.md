# 前言

Django 框架是专门为帮助开发人员快速高效地构建健壮、功能强大的 web 应用程序而设计的。它消除了过程中的许多繁琐工作和重复，解决了诸如项目结构、数据库对象关系映射、模板、表单验证、会话、身份验证、安全性、cookie 管理、国际化、基本管理以及从脚本访问数据的接口等问题。Django 是基于 Python 编程语言构建的，它本身强制执行清晰易读的代码。除了核心框架之外，Django 的设计还使开发人员能够创建第三方模块，这些模块可以与您自己的应用程序结合使用。Django 有一个成熟且充满活力的社区，您可以在这里找到源代码、获得帮助并做出贡献。

*Django 3 Web 开发手册，第四版，*将指导您使用 Django 3.0 框架完成 Web 开发过程的每个阶段。我们从项目的配置和结构开始。然后，您将学习如何使用可重用组件定义数据库结构，以及如何在项目的整个生命周期中对其进行管理。本书将继续介绍用于输入和列出数据的表单和视图。我们将继续使用响应模板和 JavaScript 来增强用户体验。然后，我们将使用定制的过滤器和标签来增强 Django 的模板系统，使前端开发更加灵活。在此之后，您将定制管理界面，以简化内容编辑器的工作流程。从那时起，我们将重点转向项目的稳定性和健壮性，帮助保护和优化您的应用程序。接下来，我们将研究如何有效地存储和操作层次结构。然后，我们将演示从不同来源收集数据并以一系列格式向他人提供您自己的数据比您想象的要简单。然后，我们将向您介绍一些编程和调试 Django 项目代码的技巧。我们将继续介绍测试代码的一些可用选项。在本书结束之前，我们将向您展示如何将项目部署到生产环境中。最后，我们将通过设置常见的维护实践来完成开发周期。

与许多其他 Django 书籍（只关注框架本身）不同，本书涵盖了几个重要的第三方模块，这些模块将为您提供完成 web 开发所需的工具。此外，我们还提供了使用 Bootstrap 前端框架和 jqueryjavascript 库的示例，它们都简化了高级和复杂用户界面的创建。

# 这本书是给谁的

如果你有使用 Django 的经验，并且希望提高你的技能，这本书适合你。我们为中级和专业 Django 开发人员设计了内容，这些开发人员的目标是构建多语言、安全、响应速度快、可随时间扩展的健壮项目。

# 这本书涵盖的内容

[第一章](01.html)*Django 3.0**入门*说明了任何 Django 项目所需的基本设置和配置步骤。我们介绍了虚拟环境、Docker 以及跨环境和数据库的项目设置。

[第 2 章](02.html)*模型和数据库结构*解释了如何编写可重用代码，用于构建模型。新应用首先要定义的是数据模型，它构成了任何项目的主干。您将学习如何在数据库中保存多语言数据。此外，您还将学习如何使用 Django 迁移管理数据库模式更改和数据操作。

[第 3 章](03.html)*表单和视图*展示了构建视图和表单以进行数据显示和编辑的方法。您将学习如何使用微格式和其他协议，使您的页面在搜索结果和社交网络中更容易被机器读取。您还将学习如何生成 PDF 文档和实现多语言搜索。

[第 4 章](04.html)、*模板和 JavaScript*介绍了将模板和 JavaScript 结合使用的实例。我们将这些方面结合在一起：呈现的模板向用户呈现信息，JavaScript 在现代网站中为丰富的用户体验提供了至关重要的增强。

[第 5 章](05.html)*自定义模板过滤器和标签*回顾了如何创建和使用自己的模板过滤器和标签。正如您将看到的，默认的 Django 模板系统可以扩展以满足模板开发人员的需要。

[第 6 章](06.html)、*模型管理*探讨了默认的 Django 管理界面，并指导您使用自己的功能对其进行扩展。

[第 7 章](07.html)*安全性和性能*深入探讨了 Django 固有和外部的几种方法，以确保和优化您的项目。

[第 8 章](08.html)*层次结构*探讨了 Django 中树状结构的创建和操作，以及将`django-mptt`或`treebeard`库合并到此类工作流中的好处。本章向您展示了如何同时用于层次结构的显示和管理。

[第 9 章](09.html)*导入和导出数据*演示了不同格式之间的数据传输以及不同来源之间的数据提供。在本章中，自定义管理命令用于数据导入，我们利用站点地图、RSS 和 RESTAPI 进行数据导出。

[第 10 章](10.html)*钟声和口哨*展示了一些在日常 web 开发和调试中有用的附加片段和技巧。

[第 11 章](11.html)*测试*介绍了不同类型的测试，并提供了一些如何测试项目代码的特征示例。

[第 12 章](12.html)、*部署*涉及到 Python 包索引的第三方应用部署，以及到专用服务器的 Django 项目部署。

[第 13 章](13.html)、*维护*解释了如何创建数据库备份、为常规任务设置 cron 作业以及记录事件以供进一步检查。

# 充分利用这本书

要使用这些页面中的示例开发 Django 3.0，您需要以下内容：

*   Python 3.6 或更高版本
*   用于图像处理的**枕头**库
*   MySQL 数据库和`mysqlclient`绑定库，或者 PostgreSQL 数据库和`psycopg2-binary`绑定库
*   Docker Desktop 或 Docker Toolbox 用于完整的系统虚拟化，或内置的虚拟环境用于将每个项目的 Python 模块分开
*   用于版本控制的 Git

| **本书所涵盖的软件/硬件** | **操作系统建议** |
| Python 3.6 或更高版本
Django 3.0.X
PostgreSQL 11.4 或更高版本/MySQL 5.6 或更高版本 | 任何最新的基于 Unix 的操作系统，如 macOS 或 Linux（尽管也可以在 Windows 上开发） |

所有其他具体要求在每个配方中单独提及。

**如果您使用的是本书的数字版本，我们建议您自己键入代码或通过 GitHub 存储库访问代码（下一节提供链接）。这样做将帮助您避免与复制/粘贴代码或错误缩进相关的任何潜在错误。**

对于编辑项目文件，您可以使用任何代码编辑器，但我们建议使用**PyCharm**（[https://www.jetbrains.com/pycharm/](https://www.jetbrains.com/pycharm/) 或**Visual Studio 代码**（[https://code.visualstudio.com/](https://code.visualstudio.com/) 。

如果在成功发布您的 Django 项目后，您能通过电子邮件[与我分享您的成果、经验和成果，我将非常激动 aidas@bendoraitis.lt](mailto:aidas@bendoraitis.lt)。

所有代码示例都使用 Django3 进行了测试。但是，它们也应该与将来的版本版本一起使用。

# 下载示例代码文件

您可以从您的账户[www.packt.com](http://www.packt.com)下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](https://www.packtpub.com/support)并注册，将文件通过电子邮件直接发送给您。

您可以通过以下步骤下载代码文件：

1.  登录或注册[www.packt.com](http://www.packt.com)。
2.  选择“支持”选项卡。
3.  点击代码下载。
4.  在搜索框中输入图书名称，然后按照屏幕上的说明进行操作。

下载文件后，请确保使用以下最新版本解压或解压缩文件夹：

*   WinRAR/7-Zip for Windows
*   适用于 Mac 的 Zipeg/iZip/UnRarX
*   适用于 Linux 的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上的[https://github.com/PacktPublishing/Django-3-Web-Development-Cookbook-Fourth-Edition](https://github.com/PacktPublishing/Django-3-Web-Development-Cookbook-Fourth-Edition) 。如果代码有更新，它将在现有 GitHub 存储库中更新。

我们的丰富书籍和视频目录中还有其他代码包，请访问**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)** 。看看他们！

# 使用的惯例

本书中使用了许多文本约定。

`CodeInText`：表示文本中的码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。这里有一个例子：“为了让这个配方发挥作用，你需要安装`contenttypes`应用程序。”

代码块设置如下：

```
# requirements/dev.txt
-r _base.txt
coverage
django-debug-toolbar
selenium
```

当我们希望提请您注意代码块的特定部分时，相关行或项目以粗体显示：

```
class Idea(CreationModificationDateBase, MetaTagsBase, UrlBase):
    title = models.CharField(
        _("Title"),
        max_length=200,
    )
    content = models.TextField(
        _("Content"),
    )
```

任何命令行输入或输出的编写方式如下：

```
(env)$ pip install -r requirements/dev.txt
```

**粗体**：表示一个新术语、一个重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词出现在文本中，如下所示。下面是一个示例：“我们可以看到，上传相关的操作按钮也被替换为删除按钮。”

警告或重要提示如下所示。

提示和技巧如下所示。

# 小节

在这本书中，你会发现几个经常出现的标题（*准备就绪*、*如何做……*、*如何工作……*、*还有更多……*、*另见*。

要明确说明如何完成配方，请使用以下部分：

# 准备

本节告诉您配方中的预期内容，并介绍如何设置配方所需的任何软件或任何初步设置。

# 怎么做…

本节包含遵循配方所需的步骤。

# 它是如何工作的…

本节通常包括对上一节中发生的情况的详细解释。

# 还有更多…

本节包括有关配方的附加信息，以增加您对配方的了解。

# 另见

本节提供了有关配方的其他有用信息的有用链接。

# 联系

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中注明书名，并发送电子邮件至`customercare@packtpub.com`。

**勘误表**：尽管我们已尽一切努力确保内容的准确性，但还是会出现错误。如果您在本书中发现错误，如果您能向我们报告，我们将不胜感激。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)选择您的书籍，单击勘误表提交表单链接，然后输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法复制品，请您提供我们的位置地址或网站名称，我们将不胜感激。请通过`copyright@packt.com`与我们联系，并提供该材料的链接。

**如果您有兴趣成为一名作家**：如果您对某个主题有专业知识，并且您有兴趣撰写或贡献一本书，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦你阅读并使用了这本书，为什么不在你购买它的网站上留下评论呢？然后，潜在读者可以看到并使用您的无偏见意见做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者可以看到您对他们书籍的反馈。非常感谢。

有关 Packt 的更多信息，请访问[Packt.com](http://www.packt.com/)。