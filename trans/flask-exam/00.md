# 序言

*理论上，什么都不管用，但每个人都知道为什么。在实践中，一切都起作用，但没有人知道为什么。在这里，我们将理论与实践相结合；什么都不管用，也没人知道为什么！*

学习计算机科学必须始终是理论与实践的结合；你需要知道你在做什么（理论），但你也需要知道如何去做（实践）。我学习如何创建 web 应用程序的经验是，很少有教师能找到这种平衡的最佳点；要么我读了一页又一页关于继承、虚拟环境和测试驱动开发的书，想知道这一切是如何应用到我身上的，要么我安装了一堆工具、框架和库，看着奇迹发生，却不知道它是如何工作的。

我希望，接下来是一个良好的平衡。从第一章开始，您将运行一个 Flask web 应用程序，全世界都可以访问它，这是非常实用的，即使它除了用“Hello，world！”问候访问者之外什么都不做。在接下来的章节中，我们将一起浏览构建三个有趣且有用的项目。一般来说，只要有可能，我们都会自己建造。虽然重新发明轮子并不好，但在你接触到解决方案之前先接触到一个问题是好的。在编写一行 CSS 之前学习一个 CSS 框架会让你处于一种困惑的状态，你会想，“但是为什么我真的需要这个呢？”许多其他框架和工具也是如此。所以，我们将从头开始，看看为什么这很难，然后介绍一些工具，让我们的生活更轻松。我认为这是理论和实践之间的理想平衡。

当我告诉人们我正在写一本关于 Flask 的书时，人们的普遍反应是“为什么？关于 Flask 的书和教程已经很多了。”这是一个有效的问题，答案为这本书提供了一个很好的提纲。*示例烧瓶*与其他烧瓶教育材料不同，原因如下。

**我们不会让你陷入困境**

许多 Flask 教程向您展示了如何开发一个 Flask 应用程序，并在您自己的机器上本地运行它，然后结束。这是很好的第一步，但如果您对构建 web 应用程序感兴趣，您可能希望这些应用程序可以在 web 上访问，这样您的朋友、家人、同事和客户就可以欣赏您的手工作品，而不会突然出现在家中。从我们的第一个项目开始，我们的应用程序将运行在虚拟专用服务器（VPS）上，并可供全世界访问。

**我们不会构建博客应用程序**

如果您阅读过任何 web 应用程序开发教程，您一定已经注意到其中几乎每一篇都是关于如何使用 x 和 y 构建博客的。我已经厌倦了博客的例子（事实上，我再也不想看到有人向我展示如何构建博客了）。相反，在学习如何使用 Flask 开发 web 应用程序时，您将创建一些有趣的、原创的、甚至可能有用的项目。

**我们将关注安全**

网络犯罪最近已经成为一个流行语。可以说，我们几乎每天都会读到有关主要 web 应用程序遭到黑客攻击的消息，这是因为有那么多开发人员不知道 SQL 注入、CSRF、XSS、如何存储密码，以及其他许多真正应该被视为基本知识的事情。在我们开发本书中的三个项目时，我们将花时间详细解释一些核心安全概念，并向您展示如何加强我们的应用程序以抵御潜在的恶意攻击者。

**我们将深入讲解**

我们不会只给你一些代码，然后告诉你运行它。在可能的情况下，我们将解释我们正在做什么，为什么要做，以及我们是如何做的。这意味着您将能够从所有项目中获取想法，将它们与您自己的想法结合起来，并在读完本书后立即开始构建原始内容。

因此，我希望这本书能对你有用，无论你是刚开始在计算机科学和编程领域崭露头角，还是从一所著名大学获得了计算机科学学位，编译理论从你耳边倾泻而出，但现在想做些实用和有趣的事情。希望你在完成这些项目时能像我在完成这些项目时一样开心！

# 这本书涵盖的内容

[第一章](01.html "Chapter 1. Hello, World!")、*你好，世界！*，教您设置我们的开发环境和 web 服务器，并编写我们的第一个 Flask 应用程序。

[第 2 章](02.html "Chapter 2. Getting Started with Our Headlines Project")*开始我们的头条新闻项目*，向您展示了当用户访问 URL 时如何运行 Python 代码以及如何将基本数据返回给用户。我们还将研究如何使用 RSS 提要自动获取最新的标题。

[第三章](03.html "Chapter 3. Using Templates in Our Headlines Project")*在我们的标题项目*中使用模板，介绍 Jinja 模板并将其集成到我们的标题项目中。我们将展示如何通过将数据从 Python 代码传递到模板文件来提供动态 HTML 内容。

[第 4 章](04.html "Chapter 4. User Input for Our Headlines Project")，*我们的头条新闻项目*的用户输入，展示了如何通过互联网从我们的用户那里获取输入，并使用此输入定制我们将向用户展示的内容。我们将研究如何通过 JSON API 访问 currenct 天气信息，并将这些信息包括在我们的项目中。

[第 5 章](05.html "Chapter 5. Improving the User Experience of Our Headlines Project")*改善我们标题项目*的用户体验，指示您向我们的标题项目添加 cookies，以便我们的应用程序能够记住我们用户的选择。我们还将通过添加一些基本的 CSS 来设计我们的应用程序。

[第 6 章](06.html "Chapter 6. Building an Interactive Crime Map")*构建互动犯罪地图*介绍了我们的新项目，即犯罪地图。我们将介绍关系数据库，在服务器上安装 MySQL，并了解如何从 Flask 应用程序与数据库交互。

[第 7 章](07.html "Chapter 7. Adding Google Maps to Our Crime Map Project")*将谷歌地图添加到我们的犯罪地图项目*中，指导您添加谷歌地图小部件，并展示如何根据我们的数据库从地图中添加和删除标记。我们将添加一个带有各种输入的 HTML 表单，供用户提交新的犯罪记录，并显示现有的犯罪记录。

[第 8 章](08.html "Chapter 8. Validating User Input in Our Crime Map Project")*在我们的犯罪地图项目中验证用户输入，*通过确保用户不会意外或通过恶意制作的输入破坏我们的第二个项目，从而完善了我们的第二个项目。

[第 9 章](09.html "Chapter 9. Building a Waiter Caller App")*构建侍者呼叫应用程序*介绍了我们的最终项目，这是一个在餐厅将侍者呼叫到餐桌上的应用程序。我们将介绍 Bootstrap 并建立一个基本的用户帐户控制系统，该系统使用 Bootstrap 作为前端。

[第 10 章](10.html "Chapter 10. Template Inheritance and WTForms in Waiter Caller Project")、*模板继承和侍者呼叫项目*中的 WTForms 介绍了 Jinja 的模板继承特性，这样我们就可以在不重复代码的情况下添加类似的页面。我们将使用 WTForms 库使 web 表单更易于构建和验证。

[第 11 章](11.html "Chapter 11. Using MongoDB with Our Waiter Caller Project")*将 MongoDB 与我们的服务员呼叫项目*一起使用，讨论如何在我们的服务器上安装和配置 MongoDB，并将其链接到我们的服务员呼叫项目。我们将通过向数据库添加索引和向应用程序添加 favicon 来完成我们的最终项目。

[附录](12.html "Appendix A. A Sneak Peek into the Future")*是对未来的一次窥视*，概述了一些我们无法详细介绍的重要主题和技术，并给出了在哪些方面可以了解更多信息的建议。

# 这本书你需要什么

我们将使用的所有示例都假设您在开发机器上使用 Ubuntu 操作系统，并且您可以访问运行 Ubuntu 服务器的服务器（我们将在第一章讨论如何设置后者）。如果您非常喜欢另一个操作系统，并且已经设置了 Python 环境（包括 Python 包 manger pip），那么示例将很容易翻译。

本书中使用的所有其他软件和库都是免费提供的，我们将根据需要详细演示如何安装和配置它们。

# 这本书是给谁的

你有没有看过 PHP，讨厌笨拙臃肿的语法？或者，您是否看过.Net 并希望它更开放、更灵活？您是否尝试过 Python 中的 GUI 库，发现它们很难使用？如果你对其中任何一个问题的回答是肯定的，那么这本书就是为你准备的。

它还面向了解 Python 基础知识并希望学习如何使用 Python 构建具有 web 前端的强大解决方案的人。

# 公约

在本书中，您将发现许多文本样式可以区分不同类型的信息。下面是这些风格的一些例子，并解释了它们的含义。

文本中的代码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄如下所示：“我们可以通过使用`include`指令来包含其他上下文。”

代码块设置如下：

```py
@app.route("/")
def get_news():
return "no news is good news"
```

当我们希望提请您注意代码块的特定部分时，相关行或项目以粗体显示：

```py
import feedparserfrom flask import Flask
app = Flask(__name__)BBC_FEED = "http://feeds.bbci.co.uk/news/rss.xml"
```

任何命令行输入或输出的编写方式如下：

```py
sudo apt-get update
sudo apt-get install git

```

**新术语**和**重要词语**以粗体显示。您在屏幕上看到的文字（例如，在菜单或对话框中）显示在文本中，如下所示：“单击**下一个**按钮将移动到下一个屏幕。”

### 注

警告或重要注释显示在这样的框中。

### 提示

提示和技巧如下所示。

# 读者反馈

我们欢迎读者的反馈。让我们知道你对这本书的看法你喜欢还是不喜欢。读者反馈对我们来说很重要，因为它可以帮助我们开发出您将真正从中获得最大收益的标题。

要向我们发送总体反馈，只需发送电子邮件`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在邮件主题中提及该书的标题。

如果您对某个主题有专业知识，并且您有兴趣撰写或贡献一本书，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然您是一本 Packt 图书的骄傲拥有者，我们有很多东西可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从您的帐户[下载本书的示例代码文件 http://www.packtpub.com](http://www.packtpub.com) 。如果您在其他地方购买了本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support) 并注册，将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。
2.  将鼠标指针悬停在顶部的**支架**选项卡上。
3.  点击**代码下载&勘误表**。
4.  在**搜索**框中输入图书名称。
5.  选择要下载代码文件的书籍。
6.  从您购买本书的下拉菜单中选择。
7.  点击**代码下载**。

下载文件后，请确保使用以下最新版本解压或解压缩文件夹：

*   WinRAR/7-Zip for Windows
*   适用于 Mac 的 Zipeg/iZip/UnRarX
*   适用于 Linux 的 7-Zip/PeaZip

## 下载本书彩色图片

我们还为您提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。彩色图像将帮助您更好地了解输出中的更改。您可以从[下载此文件 https://www.packtpub.com/sites/default/files/downloads/FlaskByExample_ColorImages.pdf](https://www.packtpub.com/sites/default/files/downloads/FlaskByExample_ColorImages.pdf) 。

## 勘误表

虽然我们已尽一切努力确保内容的准确性，但错误确实会发生。如果您在我们的一本书中发现错误，可能是文本或代码中的错误，如果您能向我们报告，我们将不胜感激。通过这样做，您可以使其他读者免于沮丧，并帮助我们改进本书的后续版本。如果您发现任何错误，请访问[进行报告 http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata) ，选择您的书籍，点击**勘误表提交表**链接，输入您勘误表的详细信息。一旦您的勘误表得到验证，您的提交将被接受，勘误表将上载到我们的网站或添加到该标题勘误表部分下的任何现有勘误表列表中。

要查看之前提交的勘误表，请转至[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support) 并在搜索字段中输入图书名称。所需信息将出现在**勘误表**部分下。

## 盗版

在互联网上盗版版权材料是所有媒体都面临的一个持续问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上发现任何形式的非法复制品，请立即向我们提供地址或网站名称，以便我们采取补救措施。

请致电`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`与我们联系，并提供可疑盗版材料的链接。

我们感谢您在保护我们的作者方面提供的帮助以及我们为您带来有价值内容的能力。

## 问题

如果您对本书的任何方面有任何问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`与我们联系，我们将尽力解决该问题。